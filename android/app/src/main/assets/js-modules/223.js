__d(function(t,e,i,n){'use strict';var s=e(13),a=e(224),o=e(27);function r(t,e,i){return t[e][i]}function h(t,e){return t[e]}var d=(function(){function t(e){babelHelpers.classCallCheck(this,t),s(e&&'function'==typeof e.rowHasChanged,'Must provide a rowHasChanged function.'),this._rowHasChanged=e.rowHasChanged,this._getRowData=e.getRowData||r,this._sectionHeaderHasChanged=e.sectionHeaderHasChanged,this._getSectionHeaderData=e.getSectionHeaderData||h,this._dataBlob=null,this._dirtyRows=[],this._dirtySections=[],this._cachedRowCount=0,this.rowIdentities=[],this.sectionIdentities=[]}return babelHelpers.createClass(t,[{key:"cloneWithRows",value:function(t,e){var i=e?[[].concat(babelHelpers.toConsumableArray(e))]:null;return this._sectionHeaderHasChanged||(this._sectionHeaderHasChanged=function(){return!1}),this.cloneWithRowsAndSections({s1:t},['s1'],i)}},{key:"cloneWithRowsAndSections",value:function(e,i,n){s('function'==typeof this._sectionHeaderHasChanged,'Must provide a sectionHeaderHasChanged function with section data.'),s(!i||!n||i.length===n.length,'row and section ids lengths must be the same');var a=new t({getRowData:this._getRowData,getSectionHeaderData:this._getSectionHeaderData,rowHasChanged:this._rowHasChanged,sectionHeaderHasChanged:this._sectionHeaderHasChanged});return a._dataBlob=e,a.sectionIdentities=i||Object.keys(e),n?a.rowIdentities=n:(a.rowIdentities=[],a.sectionIdentities.forEach(function(t){a.rowIdentities.push(Object.keys(e[t]))})),a._cachedRowCount=(function(t){for(var e=0,i=0;i<t.length;i++){var n=t[i];e+=n.length}return e})(a.rowIdentities),a._calculateDirtyArrays(this._dataBlob,this.sectionIdentities,this.rowIdentities),a}},{key:"getRowCount",value:function(){return this._cachedRowCount}},{key:"getRowAndSectionCount",value:function(){return this._cachedRowCount+this.sectionIdentities.length}},{key:"rowShouldUpdate",value:function(t,e){var i=this._dirtyRows[t][e];return o(void 0!==i,'missing dirtyBit for section, row: '+t+', '+e),i}},{key:"getRowData",value:function(t,e){var i=this.sectionIdentities[t],n=this.rowIdentities[t][e];return o(void 0!==i&&void 0!==n,'rendering invalid section, row: '+t+', '+e),this._getRowData(this._dataBlob,i,n)}},{key:"getRowIDForFlatIndex",value:function(t){for(var e=t,i=0;i<this.sectionIdentities.length;i++){if(!(e>=this.rowIdentities[i].length))return this.rowIdentities[i][e];e-=this.rowIdentities[i].length}return null}},{key:"getSectionIDForFlatIndex",value:function(t){for(var e=t,i=0;i<this.sectionIdentities.length;i++){if(!(e>=this.rowIdentities[i].length))return this.sectionIdentities[i];e-=this.rowIdentities[i].length}return null}},{key:"getSectionLengths",value:function(){for(var t=[],e=0;e<this.sectionIdentities.length;e++)t.push(this.rowIdentities[e].length);return t}},{key:"sectionHeaderShouldUpdate",value:function(t){var e=this._dirtySections[t];return o(void 0!==e,'missing dirtyBit for section: '+t),e}},{key:"getSectionHeaderData",value:function(t){if(!this._getSectionHeaderData)return null;var e=this.sectionIdentities[t];return o(void 0!==e,'renderSection called on invalid section: '+t),this._getSectionHeaderData(this._dataBlob,e)}},{key:"_calculateDirtyArrays",value:function(t,e,i){for(var n,s=c(e),a={},r=0;r<i.length;r++){var h=e[r];o(!a[h],'SectionID appears more than once: '+h),a[h]=c(i[r])}this._dirtySections=[],this._dirtyRows=[];for(var d=0;d<this.sectionIdentities.length;d++){n=!s[h=this.sectionIdentities[d]];var u=this._sectionHeaderHasChanged;!n&&u&&(n=u(this._getSectionHeaderData(t,h),this._getSectionHeaderData(this._dataBlob,h))),this._dirtySections.push(!!n),this._dirtyRows[d]=[];for(var l=0;l<this.rowIdentities[d].length;l++){var g=this.rowIdentities[d][l];n=!s[h]||!a[h][g]||this._rowHasChanged(this._getRowData(t,h,g),this._getRowData(this._dataBlob,h,g)),this._dirtyRows[d].push(!!n)}}}}]),t})();function c(t){if(a(t))return{};for(var e={},i=0;i<t.length;i++){var n=t[i];o(!e[n],'Value appears more than once in array: '+n),e[n]=!0}return e}i.exports=d},223);
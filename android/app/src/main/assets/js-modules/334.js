__d(function(t,i,e,n){!(function(){var t={},i=t.util={},e=Array.prototype.concat,s=Array.prototype.slice;i.bind=function(t,i){var n=s.call(arguments,2);return function(){t.apply(i,e.call(n,s.call(arguments)))}},i.extend=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};var r=t.SpringSystem=function(t){this._springRegistry={},this._activeSprings=[],this.listeners=[],this._idleSpringIndices=[],this.looper=t||new u,this.looper.springSystem=this};i.extend(r.prototype,{_springRegistry:null,_isIdle:!0,_lastTimeMillis:-1,_activeSprings:null,listeners:null,_idleSpringIndices:null,setLooper:function(t){this.looper=t,t.springSystem=this},createSpring:function(t,i){var e;return e=void 0===t||void 0===i?h.DEFAULT_ORIGAMI_SPRING_CONFIG:h.fromOrigamiTensionAndFriction(t,i),this.createSpringWithConfig(e)},createSpringWithBouncinessAndSpeed:function(t,i){var e;return e=void 0===t||void 0===i?h.DEFAULT_ORIGAMI_SPRING_CONFIG:h.fromBouncinessAndSpeed(t,i),this.createSpringWithConfig(e)},createSpringWithConfig:function(t){var i=new o(this);return this.registerSpring(i),i.setSpringConfig(t),i},getIsIdle:function(){return this._isIdle},getSpringById:function(t){return this._springRegistry[t]},getAllSprings:function(){var t=[];for(var i in this._springRegistry)this._springRegistry.hasOwnProperty(i)&&t.push(this._springRegistry[i]);return t},registerSpring:function(t){this._springRegistry[t.getId()]=t},deregisterSpring:function(t){S(this._activeSprings,t),delete this._springRegistry[t.getId()]},advance:function(t,i){for(;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(var e=0,n=this._activeSprings.length;e<n;e++){var s=this._activeSprings[e];s.systemShouldAdvance()?s.advance(t/1e3,i/1e3):this._idleSpringIndices.push(this._activeSprings.indexOf(s))}for(;this._idleSpringIndices.length>0;){var r=this._idleSpringIndices.pop();r>=0&&this._activeSprings.splice(r,1)}},loop:function(t){var i;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var e=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,s=this.listeners.length;for(n=0;n<s;n++)(i=this.listeners[n]).onBeforeIntegrate&&i.onBeforeIntegrate(this);for(this.advance(t,e),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<s;n++)(i=this.listeners[n]).onAfterIntegrate&&i.onAfterIntegrate(this);this._isIdle||this.looper.run()},activateSpring:function(t){var i=this._springRegistry[t];-1==this._activeSprings.indexOf(i)&&this._activeSprings.push(i),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())},addListener:function(t){this.listeners.push(t)},removeListener:function(t){S(this.listeners,t)},removeAllListeners:function(){this.listeners=[]}});var o=t.Spring=function t(i){this._id='s'+t._ID++,this._springSystem=i,this.listeners=[],this._currentState=new a,this._previousState=new a,this._tempState=new a};i.extend(o,{_ID:0,MAX_DELTA_TIME_SEC:.064,SOLVER_TIMESTEP_SEC:.001}),i.extend(o.prototype,{_id:0,_springConfig:null,_overshootClampingEnabled:!1,_currentState:null,_previousState:null,_tempState:null,_startValue:0,_endValue:0,_wasAtRest:!0,_restSpeedThreshold:.001,_displacementFromRestThreshold:.001,listeners:null,_timeAccumulator:0,_springSystem:null,destroy:function(){this.listeners=[],this.frames=[],this._springSystem.deregisterSpring(this)},getId:function(){return this._id},setSpringConfig:function(t){return this._springConfig=t,this},getSpringConfig:function(){return this._springConfig},setCurrentValue:function(t,i){return this._startValue=t,this._currentState.position=t,i||this.setAtRest(),this.notifyPositionUpdated(!1,!1),this},getStartValue:function(){return this._startValue},getCurrentValue:function(){return this._currentState.position},getCurrentDisplacementDistance:function(){return this.getDisplacementDistanceForState(this._currentState)},getDisplacementDistanceForState:function(t){return Math.abs(this._endValue-t.position)},setEndValue:function(t){if(this._endValue==t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var i=0,e=this.listeners.length;i<e;i++){var n=this.listeners[i].onSpringEndStateChange;n&&n(this)}return this},getEndValue:function(){return this._endValue},setVelocity:function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},getVelocity:function(){return this._currentState.velocity},setRestSpeedThreshold:function(t){return this._restSpeedThreshold=t,this},getRestSpeedThreshold:function(){return this._restSpeedThreshold},setRestDisplacementThreshold:function(t){this._displacementFromRestThreshold=t},getRestDisplacementThreshold:function(){return this._displacementFromRestThreshold},setOvershootClampingEnabled:function(t){return this._overshootClampingEnabled=t,this},isOvershootClampingEnabled:function(){return this._overshootClampingEnabled},isOvershooting:function(){var t=this._startValue,i=this._endValue;return this._springConfig.tension>0&&(t<i&&this.getCurrentValue()>i||t>i&&this.getCurrentValue()<i)},advance:function(t,i){var e=this.isAtRest();if(!e||!this._wasAtRest){var n=i;i>o.MAX_DELTA_TIME_SEC&&(n=o.MAX_DELTA_TIME_SEC),this._timeAccumulator+=n;for(var s,r,a,h,u,l,c,p,g=this._springConfig.tension,_=this._springConfig.friction,S=this._currentState.position,d=this._currentState.velocity,f=this._tempState.position,m=this._tempState.velocity;this._timeAccumulator>=o.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=o.SOLVER_TIMESTEP_SEC,this._timeAccumulator<o.SOLVER_TIMESTEP_SEC&&(this._previousState.position=S,this._previousState.velocity=d),s=d,r=g*(this._endValue-f)-_*d,f=S+s*o.SOLVER_TIMESTEP_SEC*.5,a=m=d+r*o.SOLVER_TIMESTEP_SEC*.5,h=g*(this._endValue-f)-_*m,f=S+a*o.SOLVER_TIMESTEP_SEC*.5,u=m=d+h*o.SOLVER_TIMESTEP_SEC*.5,l=g*(this._endValue-f)-_*m,f=S+u*o.SOLVER_TIMESTEP_SEC*.5,c=m=d+l*o.SOLVER_TIMESTEP_SEC*.5,p=.16666666666666666*(r+2*(h+l)+(g*(this._endValue-f)-_*m)),S+=.16666666666666666*(s+2*(a+u)+c)*o.SOLVER_TIMESTEP_SEC,d+=p*o.SOLVER_TIMESTEP_SEC;this._tempState.position=f,this._tempState.velocity=m,this._currentState.position=S,this._currentState.velocity=d,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/o.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),e=!0);var v=!1;this._wasAtRest&&(this._wasAtRest=!1,v=!0);var E=!1;e&&(this._wasAtRest=!0,E=!0),this.notifyPositionUpdated(v,E)}},notifyPositionUpdated:function(t,i){for(var e=0,n=this.listeners.length;e<n;e++){var s=this.listeners[e];t&&s.onSpringActivate&&s.onSpringActivate(this),s.onSpringUpdate&&s.onSpringUpdate(this),i&&s.onSpringAtRest&&s.onSpringAtRest(this)}},systemShouldAdvance:function(){return!this.isAtRest()||!this.wasAtRest()},wasAtRest:function(){return this._wasAtRest},isAtRest:function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},setAtRest:function(){return this._endValue=this._currentState.position,this._tempState.position=this._currentState.position,this._currentState.velocity=0,this},_interpolate:function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},getListeners:function(){return this.listeners},addListener:function(t){return this.listeners.push(t),this},removeListener:function(t){return S(this.listeners,t),this},removeAllListeners:function(){return this.listeners=[],this},currentValueIsApproximately:function(t){return Math.abs(this.getCurrentValue()-t)<=this.getRestDisplacementThreshold()}});var a=function(){};i.extend(a.prototype,{position:0,velocity:0});var h=t.SpringConfig=function(t,i){this.tension=t,this.friction=i},u=t.AnimationLooper=function(){this.springSystem=null;var t=this,e=function(){t.springSystem.loop(Date.now())};this.run=function(){i.onFrame(e)}};t.SimulationLooper=function(t){this.springSystem=null;var i=0,e=!1;t=t||16.667,this.run=function(){if(!e){for(e=!0;!this.springSystem.getIsIdle();)this.springSystem.loop(i+=t);e=!1}}},t.SteppingSimulationLooper=function(t){this.springSystem=null;var i=0;this.run=function(){},this.step=function(t){this.springSystem.loop(i+=t)}};var l=t.OrigamiValueConverter={tensionFromOrigamiValue:function(t){return 3.62*(t-30)+194},origamiValueFromTension:function(t){return(t-194)/3.62+30},frictionFromOrigamiValue:function(t){return 3*(t-8)+25},origamiFromFriction:function(t){return(t-25)/3+8}},c=t.BouncyConversion=function(t,i){this.bounciness=t,this.speed=i;var e=this.normalize(t/1.7,0,20);e=this.projectNormal(e,0,.8);var n=this.normalize(i/1.7,0,20);this.bouncyTension=this.projectNormal(n,.5,200),this.bouncyFriction=this.quadraticOutInterpolation(e,this.b3Nobounce(this.bouncyTension),.01)};i.extend(c.prototype,{normalize:function(t,i,e){return(t-i)/(e-i)},projectNormal:function(t,i,e){return i+t*(e-i)},linearInterpolation:function(t,i,e){return t*e+(1-t)*i},quadraticOutInterpolation:function(t,i,e){return this.linearInterpolation(2*t-t*t,i,e)},b3Friction1:function(t){return 7e-4*Math.pow(t,3)-.031*Math.pow(t,2)+.64*t+1.28},b3Friction2:function(t){return 44e-6*Math.pow(t,3)-.006*Math.pow(t,2)+.36*t+2},b3Friction3:function(t){return 4.5e-7*Math.pow(t,3)-332e-6*Math.pow(t,2)+.1078*t+5.84},b3Nobounce:function(t){return t<=18?this.b3Friction1(t):t>18&&t<=44?this.b3Friction2(t):this.b3Friction3(t)}}),i.extend(h,{fromOrigamiTensionAndFriction:function(t,i){return new h(l.tensionFromOrigamiValue(t),l.frictionFromOrigamiValue(i))},fromBouncinessAndSpeed:function(i,e){var n=new t.BouncyConversion(i,e);return this.fromOrigamiTensionAndFriction(n.bouncyTension,n.bouncyFriction)},coastingConfigWithOrigamiFriction:function(t){return new h(0,l.frictionFromOrigamiValue(t))}}),h.DEFAULT_ORIGAMI_SPRING_CONFIG=h.fromOrigamiTensionAndFriction(40,7),i.extend(h.prototype,{friction:0,tension:0});var p={};i.hexToRGB=function(t){if(p[t])return p[t];3===(t=t.replace('#','')).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var i=t.match(/.{2}/g),e={r:parseInt(i[0],16),g:parseInt(i[1],16),b:parseInt(i[2],16)};return p[t]=e,e},i.rgbToHex=function(t,i,e){return t=t.toString(16),i=i.toString(16),e=e.toString(16),'#'+(t=t.length<2?'0'+t:t)+(i=i.length<2?'0'+i:i)+(e=e.length<2?'0'+e:e)};var g,_=t.MathUtil={mapValueInRange:function(t,i,e,n,s){return n+(t-i)/(e-i)*(s-n)},interpolateColor:function(t,e,n,s,r,o){s=void 0===s?0:s,r=void 0===r?1:r,e=i.hexToRGB(e),n=i.hexToRGB(n);var a=Math.floor(i.mapValueInRange(t,s,r,e.r,n.r)),h=Math.floor(i.mapValueInRange(t,s,r,e.g,n.g)),u=Math.floor(i.mapValueInRange(t,s,r,e.b,n.b));return o?'rgb('+a+','+h+','+u+')':i.rgbToHex(a,h,u)},degreesToRadians:function(t){return t*Math.PI/180},radiansToDegrees:function(t){return 180*t/Math.PI}};function S(t,i){var e=t.indexOf(i);-1!=e&&t.splice(e,1)}i.extend(i,_),'undefined'!=typeof window&&(g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(t){window.setTimeout(t,16.666666666666668)}),g||'undefined'==typeof process||'node'!==process.title||(g=setImmediate),i.onFrame=function(t){return g(t)},void 0!==n?i.extend(n,t):'undefined'!=typeof window&&(window.rebound=t)})()},334);
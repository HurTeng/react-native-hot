__d(function(e,t,i,a){'use strict';Object.defineProperty(a,"__esModule",{value:!0});var o=t(46),r=babelHelpers.interopRequireDefault(o),n=t(12),l=t(513),d=babelHelpers.interopRequireDefault(l),s=t(523),u=babelHelpers.interopRequireDefault(s),f=t(338),h=(babelHelpers.interopRequireDefault(f),t(518)),p=t(511),c=(function(e){function t(e){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state={videoData:[],isFreshing:!1},i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){this.fetchVideoData(0,10)}},{key:"fetchVideoData",value:function(e,t){var i=this;(0,h.getVideoList)(e,t).then(function(e){var t=i.state.videoData.slice();t.push.apply(t,babelHelpers.toConsumableArray(e)),i.setState({videoData:t})}).catch(function(e){n.ToastAndroid.show(e,n.ToastAndroid.SHORT)})}},{key:"loadMore",value:function(){this.state.videoData.length<=0||this.fetchVideoData(this.state.videoData.length+2,this.state.videoData.length+12)}},{key:"refreshHandle",value:function(){var e=this;this.setState({videoData:[]},function(){e.fetchVideoData(0,10)})}},{key:"backToTop",value:function(){this.refs.videoList.scrollToOffset({x:0,y:0,animated:!0})}},{key:"getVideoUrl",value:function(e){return console.log('cdss:'+e),e}},{key:"render",value:function(){var e=this;return r.default.createElement(n.View,{style:{flex:1}},r.default.createElement(n.FlatList,{ref:"videoList",style:{flex:1},ItemSeparatorComponent:function(){return r.default.createElement(n.View,{style:v.line})},data:this.state.videoData,onEndReached:this.loadMore.bind(this),onEndReachedThreshold:.2,renderItem:function(t){var i=t.item;t.separators;return r.default.createElement(n.View,null,r.default.createElement(n.View,{style:v.videoItem},r.default.createElement(u.default,{source:e.getVideoUrl(i.video_url),img:i.middle_image.url,title:i.title,duration:i.video_duration,height:(0,p.px2dp)(200)}),r.default.createElement(n.TouchableOpacity,{activeOpacity:.8,style:v.videoTips})))},refreshControl:r.default.createElement(n.RefreshControl,{refreshing:this.state.isFreshing,onRefresh:this.refreshHandle.bind(this),colors:['red','#ffd500','#0080ff','#99e600'],tintColor:"red",title:"Loading...",titleColor:"red"})}),r.default.createElement(d.default,{pressHandle:this.backToTop.bind(this)}))}}]),t})(o.Component);a.default=c;var v=n.StyleSheet.create({line:{backgroundColor:'#f5f5f3',height:(0,p.px2dp)(7)},video:{height:(0,p.px2dp)(200)},videoImg:{height:(0,p.px2dp)(200)},videoItem:{borderBottomWidth:(0,p.px2dp)(.5),borderBottomColor:'rgba(0,0,0,0.2)'},videoTips:{flexDirection:'row',height:(0,p.px2dp)(40),alignItems:'center',paddingLeft:(0,p.px2dp)(10),paddingRight:(0,p.px2dp)(10),justifyContent:'space-between'},authorInfo:{flexDirection:'row',alignItems:'center'},authorImage:{width:(0,p.px2dp)(20),height:(0,p.px2dp)(20),borderRadius:(0,p.px2dp)(50)},authorName:{marginLeft:(0,p.px2dp)(5),fontSize:(0,p.px2dp)(14)},videoInfo:{flexDirection:'row',alignItems:'center'},icon:{marginRight:(0,p.px2dp)(2),marginLeft:(0,p.px2dp)(10)},videoNum:{fontSize:(0,p.px2dp)(14)}})},522);